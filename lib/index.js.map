{"version":3,"file":"index.js","sources":["../src/config.ts","../src/utils.ts","../src/markup.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["defaultConfig","vertical","borderSize","fontSize","backgroundColor","tickColor","labelColor","gradient","dbRangeMin","dbRangeMax","dbTickSize","maskTransition","audioMeterStandard","peakHoldDuration","scale","scaleOffset","dbFromFloat","floatVal","x","y","Math","log","verticalLabelHeight","createTicks","parent","config","ticks","min","max","tickSize","i","floor","push","dbTicks","ticksDiv","document","createElement","style","position","nordic","scaleOffsetValue","height","width","marginTop","marginRight","appendChild","map","t","tickDiv","color","textContent","toString","percentInRange","top","right","textAlign","transform","audioMeterStandards","Map","peakSampleProcessor","constructor","src","ele","options","this","srcNode","Object","assign","channelCount","tempPeaks","Array","fill","heldPeaks","peakHoldTimeouts","meterElement","boxSizing","padding","display","flexDirection","createContainerDiv","channelElements","outerDiv","justifyContent","totalBorder","from","keys","channelDiv","createChannelElements","peakLabels","parents","label","alignItems","createPeakLabels","bars","barDiv","transition","backgroundImage","join","createBars","addEventListener","clearPeaks","bind","paintMeter","initNode","node","AudioWorkletNode","context","parameterData","err","workletString","get","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","data","console","message","peaks","length","clearTimeout","window","setTimeout","clearPeak","forEach","clipPath","db","clipPercent","audioClipPath","textLabel","heldPeak","toFixed","animationRequestId","requestAnimationFrame","getPeaks","current","maxes","currentDB","maxesDB","cleanup","disconnect","removeEventListener","undefined","cancelAnimationFrame","remove"],"mappings":"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"}