{"version":3,"file":"index.esm.js","sources":["../src/config.ts","../src/utils.ts","../src/markup.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["defaultConfig","vertical","borderSize","fontSize","backgroundColor","tickColor","labelColor","gradient","dbRangeMin","dbRangeMax","dbTickSize","maskTransition","audioMeterStandard","peakHoldDuration","scale","scaleOffset","dbFromFloat","floatVal","x","y","Math","log","verticalLabelHeight","createTicks","parent","config","ticks","min","max","tickSize","i","floor","push","dbTicks","ticksDiv","document","createElement","style","position","nordic","scaleOffsetValue","height","width","marginTop","marginRight","appendChild","map","t","tickDiv","color","textContent","toString","percentInRange","top","right","textAlign","transform","audioMeterStandards","Map","peakSampleProcessor","WebAudioPeakMeter","constructor","src","ele","options","this","srcNode","Object","assign","channelCount","tempPeaks","Array","fill","heldPeaks","peakHoldTimeouts","meterElement","boxSizing","padding","display","flexDirection","createContainerDiv","channelElements","outerDiv","justifyContent","totalBorder","from","keys","channelDiv","createChannelElements","peakLabels","parents","label","alignItems","createPeakLabels","bars","barDiv","transition","backgroundImage","join","createBars","addEventListener","clearPeaks","bind","paintMeter","initNode","node","AudioWorkletNode","context","parameterData","err","workletString","get","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","data","console","message","peaks","length","clearTimeout","window","setTimeout","clearPeak","forEach","clipPath","db","clipPercent","audioClipPath","textLabel","heldPeak","toFixed","animationRequestId","requestAnimationFrame","getPeaks","current","maxes","currentDB","maxesDB","cleanup","disconnect","removeEventListener","undefined","cancelAnimationFrame","remove"],"mappings":"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"}