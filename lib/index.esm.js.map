{"version":3,"file":"index.esm.js","sources":["../src/config.ts","../src/utils.ts","../src/markup.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["defaultConfig","vertical","borderSize","fontSize","backgroundColor","tickColor","labelColor","gradient","dbRangeMin","dbRangeMax","dbTickSize","maskTransition","audioMeterStandard","peakHoldDuration","scale","scaleOffset","dbFromFloat","floatVal","x","y","Math","log","verticalLabelHeight","createTicks","parent","config","ticks","min","max","tickSize","i","floor","push","dbTicks","ticksDiv","document","createElement","style","position","nordic","scaleOffsetValue","height","width","marginTop","marginRight","appendChild","map","t","tickDiv","color","textContent","toString","percentInRange","top","right","textAlign","transform","WebAudioPeakMeter","constructor","src","ele","options","this","srcNode","Object","assign","channelCount","tempPeaks","Array","fill","heldPeaks","peakHoldTimeouts","meterElement","boxSizing","padding","display","flexDirection","createContainerDiv","channelElements","outerDiv","justifyContent","totalBorder","from","keys","channelDiv","createChannelElements","peakLabels","parents","label","alignItems","createPeakLabels","bars","barDiv","transition","backgroundImage","join","createBars","addEventListener","clearPeaks","bind","paintMeter","initNode","node","AudioWorkletNode","context","parameterData","err","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","data","console","message","peaks","length","clearTimeout","window","setTimeout","clearPeak","forEach","clipPath","db","clipPercent","audioClipPath","textLabel","heldPeak","toFixed","animationRequestId","requestAnimationFrame","getPeaks","current","maxes","currentDB","maxesDB","cleanup","disconnect","removeEventListener","undefined","cancelAnimationFrame","remove"],"mappings":"AAkBO,MAAMA,EAAiC,CAC5CC,UAAU,EACVC,WAAY,EACZC,SAAU,EACVC,gBAAiB,QACjBC,UAAW,OACXC,WAAY,OACZC,SAAU,CAAC,SAAU,WAAY,WAAY,aAC7CC,YAAa,GACbC,WAAY,EACZC,WAAY,EACZC,eAAgB,OAChBC,mBAAoB,cACpBC,iBAAkB,EAClBC,MAAO,UACPC,YAAa,GC7BT,SAAUC,EAAYC,GAC1B,OAAkC,IALTC,EAKP,GALkBC,EAKdF,EAJfG,KAAKC,IAAIF,GAAKC,KAAKC,IAAIH,IADhB,IAAWA,EAAWC,CAMtC,CCHA,MACMG,EAAsB,IAsCZ,SAAAC,EAAYC,EAAqBC,GAC/C,MAAMjB,WAAEA,EAAUC,WAAEA,EAAUC,WAAEA,EAAUP,SAAEA,EAAQD,WAAEA,EAAUG,UAAEA,EAASJ,SAAEA,EAAQa,MAAEA,EAAKC,YAAEA,GAAgBU,EACxGC,ED/BF,SAAkBC,EAAaC,EAAaC,EAAkBf,GAClE,MAAMY,EAAQ,GACd,IAAK,IAAII,EAAIV,KAAKW,MAAMJ,GAAO,EAAGG,EAAIF,EAAKE,GAAK,GAE1CA,EAAID,GAAa,GADG,UAATf,GAGU,GAALgB,IADlBJ,EAAMM,KAAKF,GAKf,OAAOJ,CACT,CCoBgBO,CAAQzB,EAAYC,EAAYC,EAAYI,GACpDoB,EAAWC,SAASC,cAAc,OACxCF,EAASG,MAAMC,SAAW,WAC1B,MAAMC,EAAmB,WAAVzB,EACT0B,EAAmBD,EAAS,EAAIxB,EAClCd,GACFiC,EAASG,MAAMI,OAAS,eAAetC,EAAWmB,OAClDY,EAASG,MAAMK,MAAQH,EAAuB,EAAXpC,EAAH,KA7CV,EA6CmCA,EAAH,KACtD+B,EAASG,MAAMM,UAAexC,EAAWmB,EAAd,OAE3BY,EAASG,MAAMI,OAjDU,IAiDEtC,EAAH,KACxB+B,EAASG,MAAMK,MAAQ,eApDE,EAoDavC,OACtC+B,EAASG,MAAMO,YArDU,EAqDOzC,EAAH,MAE/BqB,EAAOqB,YAAYX,GAmBnB,OAlBiBR,EAAMoB,KAAKC,IAC1B,MAAMC,EAAUb,SAASC,cAAc,OACvCF,EAASW,YAAYG,GACrBA,EAAQX,MAAMC,SAAW,WACzBU,EAAQX,MAAMY,MAAQV,GAAWQ,EAAEP,GAAqB,EAAI,MAAQnC,EACpE2C,EAAQX,MAAMlC,SAAW,GAAGA,MAC5B6C,EAAQE,YAAcX,IAAiB,IAAPQ,EAAW,QAAUA,EAAEP,GAAkBW,WACzE,MAAMC,GAAmB3C,EAAasC,IAAMtC,EAAaD,GAAe,IASxE,OARIP,GACF+C,EAAQX,MAAMgB,IAAM,QAAQD,QAAqBjD,OACjD6C,EAAQX,MAAMiB,MAAQ,GAAGpD,MACzB8C,EAAQX,MAAMkB,UAAY,UAE1BP,EAAQX,MAAMiB,MAAQ,GAAGF,KACzBJ,EAAQX,MAAMmB,UAAY,mBAErBR,CAAO,GAGlB,OCjEaS,EAeX,WAAAC,CAAYC,EAAgBC,EAAkBC,EAAU,CAAA,GACtDC,KAAKC,QAAUJ,EACfG,KAAKrC,OAASuC,OAAOC,OAAMD,OAAAC,OAAA,GAAMjE,GAAiB6D,GAClDC,KAAKI,aAAeP,EAAIO,aACxBJ,KAAKK,UAAY,IAAIC,MAAMN,KAAKI,cAAcG,KAAK,GACnDP,KAAKQ,UAAY,IAAIF,MAAMN,KAAKI,cAAcG,KAAK,GACnDP,KAAKS,iBAAmB,IAAIH,MAAMN,KAAKI,cAAcG,KAAK,GACtDT,IACFE,KAAKtC,ODTK,SAAmBA,EAAqBC,GACtD,MAAMrB,gBAAEA,EAAeF,WAAEA,EAAUD,SAAEA,GAAawB,EAC5C+C,EAAerC,SAASC,cAAc,OAU5C,OATAoC,EAAanC,MAAMjC,gBAAkBA,EACrCoE,EAAanC,MAAMoC,UAAY,aAC/BD,EAAanC,MAAMI,OAAS,OAC5B+B,EAAanC,MAAMqC,QAAU,GAAGxE,MAC5BD,IACFuE,EAAanC,MAAMsC,QAAU,OAC7BH,EAAanC,MAAMuC,cAAgB,eAErCpD,EAAOqB,YAAY2B,GACZA,CACT,CCJoBK,CAAmBjB,EAAKE,KAAKrC,QAC3CqC,KAAKgB,yBD4CTtD,EACAC,EACAyC,GAEA,MAAM/D,SAAEA,EAAQF,SAAEA,EAAQC,WAAEA,GAAeuB,EACrCsD,EAAW5C,SAASC,cAAc,OACxC2C,EAAS1C,MAAMsC,QAAU,OACzBI,EAAS1C,MAAM2C,eAAiB,gBAC5B/E,GACF8E,EAAS1C,MAAMI,OAAS,OACxBsC,EAAS1C,MAAMK,MAAQ,eArFD,EAqFgBvC,SAEtC4E,EAAS1C,MAAMI,OAAS,eAxFC,IAwFctC,OACvC4E,EAAS1C,MAAMK,MAAQ,OACvBqC,EAAS1C,MAAMuC,cAAgB,UAEjCpD,EAAOqB,YAAYkC,GACnB,MAAME,GAAef,EAAe,GAAKhE,EAezC,OAdoBkE,MAAMc,KAAKd,MAAMF,GAAciB,QAAQrC,KAAI,KAC7D,MAAMsC,EAAajD,SAASC,cAAc,OAW1C,OAVInC,GACFmF,EAAW/C,MAAMI,OAAS,OAC1B2C,EAAW/C,MAAMK,MAAQ,gBAAgBuC,UAAoBf,OAE7DkB,EAAW/C,MAAMsC,QAAU,OAC3BS,EAAW/C,MAAMI,OAAS,gBAAgBwC,UAAoBf,KAC9DkB,EAAW/C,MAAMK,MAAQ,OACzB0C,EAAW/C,MAAMuC,cAAgB,eAEnCG,EAASlC,YAAYuC,GACdA,CAAU,GAGrB,CC7E6BC,CAAsBvB,KAAKtC,OAAQsC,KAAKrC,OAAQqC,KAAKI,cAC5EJ,KAAKwB,WD8EK,SACdC,EACA9D,GAEA,MAAMnB,WAAEA,EAAUH,SAAEA,EAAQF,SAAEA,GAAawB,EAsB3C,OArBkB8D,EAAQzC,KAAKtB,IAC7B,MAAMgE,EAAQrD,SAASC,cAAc,OAkBrC,OAhBAoD,EAAMnD,MAAMY,MAAQ3C,EACpBkF,EAAMnD,MAAMlC,SAAW,GAAGA,MAC1BqF,EAAMtC,YAAc,KAChBjD,GACFuF,EAAMnD,MAAMI,OAAYtC,EAAWmB,EAAd,KACrBkE,EAAMnD,MAAMK,MAAQ,OACpB8C,EAAMnD,MAAMkB,UAAY,WAGxBiC,EAAMnD,MAAMK,MAlIW,EAkIAvC,EAAH,KAEpBqF,EAAMnD,MAAMsC,QAAU,OACtBa,EAAMnD,MAAM2C,eAAiB,SAC7BQ,EAAMnD,MAAMoD,WAAa,UAE3BjE,EAAOqB,YAAY2C,GACZA,CAAK,GAGhB,CCzGwBE,CAAiB5B,KAAKgB,gBAAiBhB,KAAKrC,QAC9DqC,KAAK6B,KD0GK,SAAWJ,EAAwB9D,GACjD,MAAMlB,SAAEA,EAAQN,SAAEA,EAAQE,SAAEA,EAAQQ,eAAEA,GAAmBc,EAkBzD,OAhBgB8D,EAAQzC,KAAKtB,IAC3B,MAAMoE,EAASzD,SAASC,cAAc,OAatC,OAZAwD,EAAOvD,MAAMwD,WAAa,aAAalF,IACnCV,GACF2F,EAAOvD,MAAMI,OAAS,eAAetC,EAAWmB,OAChDsE,EAAOvD,MAAMK,MAAQ,OACrBkD,EAAOvD,MAAMyD,gBAAkB,8BAA8BvF,EAASwF,KAAK,WAE3EH,EAAOvD,MAAMI,OAAS,OAEtBmD,EAAOvD,MAAMK,MAAQ,eA3JE,EA2JavC,OACpCyF,EAAOvD,MAAMyD,gBAAkB,4BAA4BvF,EAASwF,KAAK,UAE3EvE,EAAOqB,YAAY+C,GACZA,CAAM,GAGjB,CC9HkBI,CAAWlC,KAAKgB,gBAAiBhB,KAAKrC,QAClDqC,KAAKpC,MAAQH,EAAYuC,KAAKtC,OAAQsC,KAAKrC,QAC3CqC,KAAKtC,OAAOyE,iBAAiB,QAASnC,KAAKoC,WAAWC,KAAKrC,OAC3DA,KAAKsC,cAEPtC,KAAKuC,UACN,CAED,cAAMA,GACJ,MAAMzF,mBAAEA,GAAuBkD,KAAKrC,OACpC,IACEqC,KAAKwC,KAAO,IAAIC,iBAAiBzC,KAAKC,QAAQyC,QAAS,GAAG5F,cAAgC,CACxF6F,cAAe,CAAE,GAEpB,CAAC,MAAOC,GACP,MAEMC,EAAO,IAAIC,KAAK,CADG,cAAvBhG,u2DACqC,CAAEiG,KAAM,2BACzCC,EAAYC,IAAIC,gBAAgBL,SAChC7C,KAAKC,QAAQyC,QAAQS,aAAaC,UAAUJ,GAClDhD,KAAKwC,KAAO,IAAIC,iBAAiBzC,KAAKC,QAAQyC,QAAS,GAAG5F,cAAgC,CACxF6F,cAAe,CAAE,GAEpB,CACD3C,KAAKwC,KAAKa,KAAKC,UAAaC,GAAqBvD,KAAKwD,sBAAsBD,GAC5EvD,KAAKC,QAAQwD,QAAQzD,KAAKwC,MAAMiB,QAAQzD,KAAKC,QAAQyC,QAAQgB,YAC9D,CAED,qBAAAF,CAAsBD,GAIpB,GAHqB,YAAjBA,EAAGI,KAAKZ,MACVa,QAAQrG,IAAIgG,EAAGI,KAAKE,SAED,UAAjBN,EAAGI,KAAKZ,KAAkB,CAC5B,MAAMe,MAAEA,GAAUP,EAAGI,KACrB,IAAK,IAAI3F,EAAI,EAAGA,EAAIgC,KAAKK,UAAU0D,OAAQ/F,GAAK,EAC1C8F,EAAMC,OAAS/F,EACjBgC,KAAKK,UAAUrC,GAAK8F,EAAM9F,GAE1BgC,KAAKK,UAAUrC,GAAK,EAGpB8F,EAAMC,OAAS/D,KAAKI,cACtBJ,KAAKK,UAAUE,KAAK,EAAKuD,EAAMC,QAEjC,IAAK,IAAI/F,EAAI,EAAGA,EAAI8F,EAAMC,OAAQ/F,GAAK,EACjC8F,EAAM9F,GAAKgC,KAAKQ,UAAUxC,KAC5BgC,KAAKQ,UAAUxC,GAAK8F,EAAM9F,GACtBgC,KAAKS,iBAAiBzC,IACxBgG,aAAahE,KAAKS,iBAAiBzC,IAEjCgC,KAAKrC,OAAOZ,mBACdiD,KAAKS,iBAAiBzC,GAAKiG,OAAOC,YAAW,KAC3ClE,KAAKmE,UAAUnG,EAAE,GAChBgC,KAAKrC,OAAOZ,mBAItB,CACF,CAED,UAAAuF,GACE,MAAM5F,WAAEA,EAAUC,WAAEA,EAAUR,SAAEA,EAAQa,MAAEA,EAAKC,YAAEA,GAAgB+C,KAAKrC,OAClEqC,KAAK6B,MACP7B,KAAK6B,KAAKuC,SAAQ,CAACtC,EAAQ9D,KACzB,MACMqG,EDhGR,SACJC,EACA5H,EACAC,EACAR,GAEA,IAAIoI,EAAcjH,KAAKW,MAA2B,KAAnBtB,EAAa2H,IAAc3H,EAAaD,IAOvE,OANI6H,EAAc,MAChBA,EAAc,KAEZA,EAAc,IAChBA,EAAc,GAEZpI,EACK,SAASoI,UAEX,WAAWA,SACpB,CC+EyBC,CADAtH,EAAY8C,KAAKK,UAAUrC,IACHtB,EAAYC,EAAYR,GACjE2F,EAAOvD,MAAM8F,SAAWA,CAAQ,IAGhCrE,KAAKwB,YACPxB,KAAKwB,WAAW4C,SAAQ,CAACK,EAAWzG,KAClC,GAA0B,IAAtBgC,KAAKQ,UAAUxC,GACjByG,EAAUrF,YAAc,SACnB,CACL,MACMV,EADmB,WAAV1B,EACmB,EAAIC,EAChCyH,EAAWxH,EAAY8C,KAAKQ,UAAUxC,IAAMU,EAClD+F,EAAUrF,YAAcsF,EAASC,QAAQ,EAC1C,KAGL3E,KAAK4E,mBAAqBX,OAAOY,sBAAsB7E,KAAKsC,WAAWD,KAAKrC,MAC7E,CAED,SAAAmE,CAAUnG,GACRgC,KAAKQ,UAAUxC,GAAKgC,KAAKK,UAAUrC,EACpC,CAED,UAAAoE,GACE,IAAK,IAAIpE,EAAI,EAAGA,EAAIgC,KAAKQ,UAAUuD,OAAQ/F,GAAK,EAC9CgC,KAAKmE,UAAUnG,EAElB,CAED,QAAA8G,GACE,MAAO,CACLC,QAAS/E,KAAKK,UACd2E,MAAOhF,KAAKQ,UACZyE,UAAWjF,KAAKK,UAAUrB,IAAI9B,GAC9BgI,QAASlF,KAAKQ,UAAUxB,IAAI9B,GAE/B,CAED,OAAAiI,GACMnF,KAAKwC,MACPxC,KAAKwC,KAAK4C,aAERpF,KAAKtC,SACPsC,KAAKtC,OAAO2H,oBAAoB,QAASrF,KAAKoC,WAAWC,KAAKrC,YAC9BsF,IAA5BtF,KAAK4E,oBACPX,OAAOsB,qBAAqBvF,KAAK4E,oBAEnC5E,KAAKtC,OAAO8H,SAEf"}