{"version":3,"file":"web-audio-peak-meter-3.1.0.min.js","sources":["../src/config.ts","../src/utils.ts","../src/markup.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["defaultConfig","vertical","borderSize","fontSize","backgroundColor","tickColor","labelColor","gradient","dbRangeMin","dbRangeMax","dbTickSize","maskTransition","audioMeterStandard","peakHoldDuration","scale","scaleOffset","dbFromFloat","floatVal","x","y","Math","log","verticalLabelHeight","createTicks","parent","config","ticks","min","max","tickSize","i","floor","nordic","push","dbTicks","ticksDiv","document","createElement","style","position","scaleOffsetValue","height","width","marginTop","marginRight","appendChild","map","t","tickDiv","color","textContent","toString","percentInRange","top","right","textAlign","transform","constructor","src","ele","options","this","srcNode","Object","assign","channelCount","tempPeaks","Array","fill","heldPeaks","peakHoldTimeouts","meterElement","boxSizing","padding","display","flexDirection","createContainerDiv","channelElements","outerDiv","justifyContent","totalBorder","from","keys","channelDiv","createChannelElements","peakLabels","parents","label","alignItems","createPeakLabels","bars","barDiv","transition","backgroundImage","join","createBars","addEventListener","clearPeaks","bind","paintMeter","initNode","async","node","AudioWorkletNode","context","parameterData","err","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","data","console","message","peaks","length","clearTimeout","window","setTimeout","clearPeak","forEach","clipPath","db","clipPercent","audioClipPath","textLabel","heldPeak","toFixed","animationRequestId","requestAnimationFrame","getPeaks","current","maxes","currentDB","maxesDB","cleanup","disconnect","removeEventListener","undefined","cancelAnimationFrame","remove"],"mappings":"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"}